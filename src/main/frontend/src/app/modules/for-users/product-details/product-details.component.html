<app-header></app-header>
<section class="bg-primary padding-y-sm">
  <div class="container">

    <ol class="breadcrumb ondark mb-0">
      <li class="breadcrumb-item"><a href="#">Home</a></li>
      <li class="breadcrumb-item"><a href="#">Library</a></li>
      <li class="breadcrumb-item active" aria-current="page">Data</li>
    </ol>

  </div> <!-- container //  -->
</section>
<!-- ============== SECTION PAGETOP END// ============== -->
<!-- ============== SECTION CONTENT ============== -->
<section class="padding-y">
  <div class="container-fluid">

    <div class="row margin">
      <aside class="col-lg-8">
        <article class="gallery-wrap">
          <div *ngIf="product.previewPictures.length!=0;then hasPreviewPictures else noPreviewPictures"></div>
          <ng-template #noPreviewPictures>
            <div class="img-big-wrap img-thumbnail">

              <img height="560" width="1000" src="https://cdn.mos.cms.futurecdn.net/TdaG9Gex57AHnRZG79wYKT.jpg">

              <div class="preview_count">0/0</div>
            </div> <!-- img-big-wrap.// -->
            <div class="thumbs-wrap">
            </div> <!-- thumbs-wrap.// -->
          </ng-template>
          <ng-template #hasPreviewPictures>
            <div class="img-big-wrap img-thumbnail" style="height:500px;">
              <img src="https://wallpaperaccess.com/full/112715.jpg">
              <div class="preview_count">1/{{TotalPreviewCount}}</div>
            </div> <!-- img-big-wrap.// -->
              <div class="thumbs-wrap" style="background-color: #f8f9fa;padding: 5px;">
                <div class="thumbs_row">
                  <div class="thumb_column" *ngFor="let pic of product.previewPictures; index as i" (click)="onChooseImage(pic)">
                    <div class="thumb_column_black"></div>
                    <div class="thumb_content" style="background-image:url({{getPreviewPictureSource(pic)}});"></div>
                  </div>
                </div>
                <div>
                  <div class="dots" *ngFor="let dot of dots;index as i">
                  <div *ngIf="i==0"><span class="dott active" (click)="currentSlide(dot)"></span></div>
                    <div *ngIf="i!=0"><span class="dott" (click)="currentSlide(dot)"></span></div>
                  </div>
                  <div class="next_arrow"></div>
                </div>
       
            </div> <!-- thumbs-wrap.// -->
          </ng-template>
        </article> <!-- gallery-wrap .end// -->
        <section class="padding-y bg-light border-top" style="margin-top:20px">
          <div class="container">
            <div class="row">
              <div class="col-lg-12">
                <!-- =================== COMPONENT SPECS ====================== -->
                <div class="card">
                  <header class="card-header">
                    <ul class="nav nav-tabs card-header-tabs">
                      <li class="nav-item">
                        <a href="#" data-bs-target="#tab_specs" data-bs-toggle="tab" class="nav-link active">Mô tả</a>
                      </li>
                      <li class="nav-item">
                        <a href="#" data-bs-target="#tab_warranty" data-bs-toggle="tab" class="nav-link">Thông tin nhà sản xuất</a>
                      </li>
                      <li class="nav-item">
                        <a href="#" data-bs-target="#tab_shipping" data-bs-toggle="tab" class="nav-link">Đánh giá</a>
                      </li>
                    </ul>
                  </header>
                  <div class="tab-content">
                    <article id="tab_specs" class="tab-pane show active card-body">
                      {{product.details}}
                    </article> <!-- tab-content.// -->
                    <article id="tab_warranty" class="tab-pane card-body sellerInfo">
                      <div style="display:flex;">
                        <p style="min-width:150px; font-weight:600;">Người bán</p>
                        <p>{{product.seller.username}}</p>
                      </div>
                      <div style="display:flex;">
                        <p style="min-width: 150px; font-weight: 600;">Ngày tham gia</p>
                        <p>Ngày {{SellerJoinedDate}}</p>
                      </div>
                      <div style="display:flex;">
                        <p style="min-width: 150px; font-weight: 600;">Số lượng sản phẩm</p>
                        <p>{{sellerTotalProductCount}}</p>
                      </div>
                      <div style="display:flex;">
                        <p style="min-width: 150px; font-weight: 600;">Tổng số đánh giá</p>
                        <p>{{product.seller.username}}</p>
                      </div>

                    </article>
                    <article id="tab_shipping" class="tab-pane card-body">
                      Another tab content  or sample information now <br>
                      Dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                      quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                      consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
                      cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
                      proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                    </article>

                  </div>
                </div>
                <!-- =================== COMPONENT SPECS .// ================== -->
              </div> <!-- col.// -->
            </div>
            <br><br>
          </div><!-- container // -->
        </section>
      </aside>
      <main class="col-lg-4">
        <article class="ps-lg-3">
          <div class="reportBtn" (click)="openReportModal()" style="position:absolute;right:4%; border:1px solid black; cursor:pointer ;border-radius:5px;">
            <img style="width: 30px; height: 30px;" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQzbVmbfZ3BkG0VBARHNv5MFluIkXOUbLRLEw&usqp=CAU" />
          </div>
          <h4 class="title text-dark">{{product.name}}</h4>
          <a [routerLink]="['/collection', owner.username]" style="text-decoration:none; color:black; display:block; width:fit-content;">
            <div class="sellerInfo" style="height: 30px; min-height: 30px;width:fit-content; cursor: pointer" (click)="redirectSellerPage()">

              <div style="display:flex;margin : 0;">
                <div id="sellerImage" style="width:30px; height:30px;"></div>
                <div style="margin-left:4px; text-align:justify;"><p style="padding:4px;">{{owner.username}}</p></div>
              </div>
            </div>
          </a>
          <div class="rating-wrap my-3">
            <ul class="rating-stars">
              <li style="width:80%" class="stars-active"> <img src="assets/images/misc/stars-active.svg" alt=""> </li>
              <li> <img src="assets/images/icons/star-7207.svg" alt=""> </li>
            </ul>
            <b class="label-rating text-warning"> Total Star</b>
            <i class="dot"></i>
            <span class="label-rating text-muted">Total Rate</span>
            <i class="dot"></i>
            <span class="label-rating text-success">Total Purchased</span>
          </div> <!-- rating-wrap.// -->

          <div class="mb-3">
            <var class="price h5">{{product.price}}<small>VND</small></var>

          </div>
          <div>
            <p>{{product.description}}</p>
          </div>
          <hr>
          <div class="row metadata">
            <div class="row metadata_details" style="margin-top:10px;">
              <div class="col-4"><label>Phiên bản</label></div>
              <div class="col-8"><a class="version_value" href="" style="text-decoration:none; color:black; font-weight:600">{{product.version}}</a></div>
            </div>
            <div class="row metadata_details" style="margin-top:10px;">
              <div class="col-4"><label>Phân loại</label></div>
              <div class="col-8"><a class="details_value" href="">{{product.category.name}}</a></div>
            </div>
            <div class="row metadata_details">
              <div class="col-4" style="display: flex; align-items: center; "><label>Nhãn</label></div>
              <div class="col-8" style="display:flex;">
                <div class="tags" *ngFor="let tag of product.tags" (click)="searchTag(tag)" style="width: auto;">
                  <p style=" user-select: none;">{{tag.name}}</p>
                </div>
              </div>
            </div>
            <div class="row metadata_details">
              <div class="col-4"><label>Giấy phép</label></div>
              <div class="col-8"><a class="details_value" href="">Giay phep</a> </div>
            </div>
          </div>

          <hr>
          <div class="row cart" style="display:flex; height:60px;">
            <div class="add_to_cart" style="width:80%; padding-right:0; color:lightgrey;"><button class="add_to_cart_btn">Thêm vào giỏ hàng</button></div>
            <div class="buy_now" style="width: 20%; color: lightgrey;"><button class="buy_now_btn">Mua ngay</button></div>
          </div>
          <div class="row files_metadata" style="margin-top:20px;">
            <div class="card">
              <header class="card-header">
                <ul class="nav nav-tabs card-header-tabs">
                  <li class="nav-item">
                    <a href="#" data-bs-target="#tab_overview" data-bs-toggle="tab" class="nav-link active">Thông tin</a>
                  </li>
                  <li class="nav-item">
                    <a href="#" data-bs-target="#tab_details" data-bs-toggle="tab" class="nav-link">Chi tiết</a>
                  </li>
                </ul>
              </header>
              <div class="tab-content">
                <article id="tab_overview" class="tab-pane show active card-body">
                  <table class="table border table-hover">
                    <tr>
                      <th>Số lượng tệp</th>
                      <td>{{product.files.length}} tệp</td>
                    </tr>
                    <tr>
                      <th>Tổng dung lượng</th>
                      <td>{{TotalSize}}</td>
                    </tr>
                    <tr>
                      <th>Hướng dẫn tải và cài đặt</th>
                      <td>{{Instruction}} </td>
                    </tr>
                  </table>
                </article> <!-- tab-content.// -->
                <article id="tab_details" class="tab-pane card-body">
                  <div *ngFor="let file of product.files" style="margin-bottom:12px;">
                    <strong class="upload_display_name">{{file.name}}</strong>&#183;<span class="file_size">{{formatFileSize(file.size)}}</span>
                  </div>
                </article>
              </div>
            </div>
          </div>
        </article> <!-- product-info-aside .// -->
      </main> <!-- col.// -->
    </div> <!-- row.// -->

  </div> <!-- container .//  -->
</section>
<!-- ============== SECTION CONTENT END// ============== -->
<!-- ============== SECTION  ============== -->
<!-- =============== SECTION  END// ============== -->

<app-footer></app-footer>
